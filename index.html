<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Diary&#39;s Blog">
<meta property="og:url" content="http://diarychris.info/blog/index.html">
<meta property="og:site_name" content="Diary&#39;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Diary&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://diarychris.info/blog/">





  <title>Diary's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Diary's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/10/15/e9-80-9a-e8-bf-87nuget-e5-8c-85-e7-ae-a1-e7-90-86-e5-99-a8-e5-bf-ab-e9-80-9f-e5-9c-a8visual-studio-e4-b8-ad-e9-85-8d-e7-bd-aeopengl-e7-8e-af-e5-a2-83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/10/15/e9-80-9a-e8-bf-87nuget-e5-8c-85-e7-ae-a1-e7-90-86-e5-99-a8-e5-bf-ab-e9-80-9f-e5-9c-a8visual-studio-e4-b8-ad-e9-85-8d-e7-bd-aeopengl-e7-8e-af-e5-a2-83/" itemprop="url">通过NuGet包管理器快速在Visual Studio中配置OpenGL环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-15T22:28:43+08:00">
                2018-10-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">PM&gt;</span> Install-Package nupengl.core -Version 0.1.0.1</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/10/13/lamp-e6-90-ad-e5-bb-ba-e7-a7-81-e6-9c-89-e4-ba-91owncloud-e6-b5-81-e7-a8-8b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/10/13/lamp-e6-90-ad-e5-bb-ba-e7-a7-81-e6-9c-89-e4-ba-91owncloud-e6-b5-81-e7-a8-8b/" itemprop="url">LAMP搭建私有云OwnCloud流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-13T13:03:58+08:00">
                2018-10-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/应用/" itemprop="url" rel="index">
                    <span itemprop="name">应用</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="STEP1-在Ubuntu-16-04搭建LAMP"><a href="#STEP1-在Ubuntu-16-04搭建LAMP" class="headerlink" title="STEP1: 在Ubuntu 16.04搭建LAMP"></a>STEP1: 在Ubuntu 16.04搭建LAMP</h2><h3 id="Apache-installation"><a href="#Apache-installation" class="headerlink" title="Apache installation"></a>Apache installation</h3><p>To install webserver i.e. Apache, open terminal &amp; execute the following command,</p>
<p><code>$ sudo apt-get install apache2</code></p>
<p>Once the package has been installed, start the apache service &amp; enable it for boot,</p>
<p><code>$ sudo systemctl start apache2</code></p>
<p><code>$ sudo systemctl enable apache2</code></p>
<p>Now we can test the apache installation. To test the apache installation, open web browser &amp; in the address bar enter the following url,</p>
<p><code>http://localhost</code></p>
<h3 id="MySQL-installation"><a href="#MySQL-installation" class="headerlink" title="MySQL installation"></a>MySQL installation</h3><p>Next thing to install is database, we are using MySql as our choice of database server. To install MySql on Ubuntu machine, run the following command from terminal</p>
<p><code>$ sudo apt-get install mysql-server mysql-client</code></p>
<p>During the MySql installation, we will be asked to provide ‘root’ password, provide a suitable password &amp; than confirm it to complete the installation. Once the installation has been completed, start the MySql service &amp; enable it for boot,</p>
<p><code>$ sudo systemctl start mysql</code></p>
<p><code>$ sudo systemctl enable mysql</code></p>
<p>We can now connect to the database to check the installation, to connect to MySql, use the following command,</p>
<p><code>$ mysql -u root -p</code></p>
<p>And than enter the root password that we provided at the time of installation to connect to mysql,</p>
<h2 id="PHP-installation"><a href="#PHP-installation" class="headerlink" title="PHP installation"></a>PHP installation</h2><p>Dynamic content of a website is processed by PHP, its a general purpose programming language. To install php on the system, execute the following command from terminal,</p>
<p><code>$ sudo apt-get install php7.0-mysql php7.0-curl php7.0-json php7.0-cgi libapache2-mod-php7.0 php7.0</code></p>
<p>Once the isntallation has been complete, we will test the php. To do that, open</p>
<p><code>$ sudo vim /var/www/html/test.php</code></p>
<p>&amp; enter the following content to it,</p>
<p><code>&lt;?  
phpinfo();  
?&gt;</code></p>
<p>Save the file &amp; restart the apache service,</p>
<p><code>$ sudo systemctl restart apache2</code></p>
<p>Now open the browser &amp; enter the following URL,</p>
<p><code>http://localhost/test.php</code></p>
<p>We should now see the following page with details about the installed PHP,</p>
<p>We know have our LAMP stack on Ubuntu OS ready to use, we can now deploy the dynamic websites on this stack.</p>
<h2 id="STEP2-搭建OwnCloud"><a href="#STEP2-搭建OwnCloud" class="headerlink" title="STEP2: 搭建OwnCloud"></a>STEP2: 搭建OwnCloud</h2><p>我们需要在自己的设备里安装这些包：</p>
<pre><code>$ sudo yum install php-mysql php-json php-xml php-mbstring php-zip php-gd curl php-curl php-pdo
</code></pre><p>安装 OwnCloud，我们现在需要在服务器上下载 OwnCloud 安装包。使用下面的命令从官方网站下载安装包（10.0.4）：</p>
<pre><code>$ wget https://download.owncloud.org/community/owncloud-10.0.4.tar.bz2
</code></pre><p>使用下面的命令解压：</p>
<pre><code>$ tar -xvf owncloud-10.0.4.tar.bz2
</code></pre><p>现在，将所有解压后的文件移动至 <code>/var/www/html</code>：</p>
<pre><code>$ mv owncloud/* /var/www/html
</code></pre><p>注意还有两个隐藏文件需要分别移动：</p>
<pre><code>$ mv owncloud/.htaccess /var/www/html
$ mv owncloud/.user.ini /var/www/html
</code></pre><p>下一步，我们需要在 Apache 的配置文件 <code>apache2.conf</code> 上做些修改：</p>
<pre><code>$ sudo vim /etc/apache2/apache2.conf
</code></pre><p>更改下面的选项：</p>
<pre><code>AllowOverride All
</code></pre><p>保存该文件，并修改 OwnCloud 文件夹的文件权限：</p>
<pre><code>$ sudo chown -R www-data:www-data /var/www/html/
$ sudo chmod 777 /var/www/html/config/
</code></pre><p>然后重启 Apache 服务器执行修改：</p>
<pre><code>$ sudo systemctl restart apache2
</code></pre><p>现在，我们需要在 MySQL 上创建一个数据库，保存来自 OwnCloud 的数据。使用下面的命令创建数据库owncloud和数据库用户ocuser：</p>
<pre><code>$ mysql -u root -p
mysql &gt; create database owncloud;
mysql &gt; GRANT ALL ON owncloud.* TO ocuser@localhost IDENTIFIED BY &apos;owncloud&apos;;
mysql &gt; flush privileges;
mysql &gt; exit
</code></pre><p>修改ocuser用户密码：</p>
<pre><code>$ mysql -u root -p
mysql &gt; use mysql; 
mysql &gt; UPDATE user SET authentication_string=PASSWORD(&quot;your password&quot;) WHERE user=&apos;ocuser&apos;;
mysql &gt; FLUSH PRIVILEGES;
mysql &gt; quit;
</code></pre><p>在浏览器中输入你的服务器IP地址，显示如下界面，填写配置，服务器端搭建，完成！</p>
<p><img src="http://diaryfun.info/wp-content/uploads/2018/10/234816ylnpqg2azlxpnlqz.jpg" alt></p>
<p>去官网下载并安装客户端：<a href="https://owncloud.org/download/。" target="_blank" rel="noopener">https://owncloud.org/download/。</a></p>
<p>ownCloud，启动！</p>
<p><img src="http://diaryfun.info/wp-content/uploads/2018/10/Snipaste_2018-10-13_12-49-40.png" alt></p>
<p>参考链接：</p>
<p><a href="https://linuxtechlab.com/install-lamp-stack-on-ubuntu" target="_blank" rel="noopener">https://linuxtechlab.com/install-lamp-stack-on-ubuntu</a></p>
<p><a href="https://linux.cn/article-9418-1.html" target="_blank" rel="noopener">https://linux.cn/article-9418-1.html</a></p>
<p>若有大佬对此文存在修改意见，或是配置过程中存在错误，请在评论区留言。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/10/10/sublime-text-3-e5-b8-b8-e7-94-a8-e6-8f-92-e4-bb-b6-e6-b8-85-e5-8d-95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/10/10/sublime-text-3-e5-b8-b8-e7-94-a8-e6-8f-92-e4-bb-b6-e6-b8-85-e5-8d-95/" itemprop="url">Sublime Text 3 常用插件清单</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-10T11:55:04+08:00">
                2018-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>BracketHighlighter</p>
<p>DocBlockr </p>
<p>Emmet </p>
<p>SideBarEnhancements </p>
<p>ColorPicker </p>
<p>ConvertToUTF8 </p>
<p>HTML-CSS-JS Prettify   </p>
<p>Git </p>
<p>jQuery </p>
<p>Python 3   </p>
<p>Theme - Spacegray  </p>
<hr>
<p> Sublime Text 3 License Code</p>
<blockquote>
<p>----- BEGIN LICENSE —– sgbteam Single User License EA7E-1153259 8891CBB9 F1513E4F 1A3405C1 A865D53F 115F202E 7B91AB2D 0D2A40ED 352B269B 76E84F0B CD69BFC7 59F2DFEF E267328F 215652A3 E88F9D8F 4C38E3BA 5B2DAAE4 969624E7 DC9CD4D5 717FB40C 1B9738CF 20B3C4F1 E917B5B3 87C38D9C ACCE7DD8 5F7EF854 86B9743C FADC04AA FB0DA5C0 F913BE58 42FEA319 F954EFDD AE881E0B —— END LICENSE ——</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/07/24/git-e6-97-a5-e5-bf-97-e5-88-ab-e5-90-8d-e9-85-8d-e7-bd-ae-e5-91-bd-e4-bb-a4-e8-a1-8cgit-lg/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/07/24/git-e6-97-a5-e5-bf-97-e5-88-ab-e5-90-8d-e9-85-8d-e7-bd-ae-e5-91-bd-e4-bb-a4-e8-a1-8cgit-lg/" itemprop="url">git日志别名配置命令行git lg</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-24T00:57:17+08:00">
                2018-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>git config --global alias.lg &quot;log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&quot;</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/07/16/182/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/07/16/182/" itemprop="url">四元数（Quaternion）和旋转</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-16T22:22:45+08:00">
                2018-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文链接：<a href="https://blog.csdn.net/candycat1992/article/details/41254799" target="_blank" rel="noopener">https://blog.csdn.net/candycat1992/article/details/41254799</a></p>
<h1 id="四元数介绍"><a href="#四元数介绍" class="headerlink" title="四元数介绍"></a>四元数介绍</h1><p>旋转，应该是三种坐标变换——缩放、旋转和平移，中最复杂的一种了。大家应该都听过，有一种旋转的表示方法叫四元数。按照我们的习惯，我们更加熟悉的是另外两种旋转的表示方法——矩阵旋转和<a href="http://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E8%A7%92" target="_blank" rel="noopener">欧拉旋转</a>。矩阵旋转使用了一个4*4大小的矩阵来表示绕任意轴旋转的变换矩阵，而欧拉选择则是按照一定的坐标轴顺序（例如先x、再y、最后z）、每个轴旋转一定角度来变换坐标或向量，它实际上是一系列坐标轴旋转的组合。 那么，<a href="http://zh.wikipedia.org/wiki/%E5%9B%9B%E5%85%83%E6%95%B8" target="_blank" rel="noopener">四元数</a>又是什么呢？简单来说，四元数本质上是一种高阶复数（听不懂了吧。。。），是一个四维空间，相对于复数的二维空间。我们高中的时候应该都学过复数，一个复数由实部和虚部组成，即x = a + bi，i是虚数单位，如果你还记得的话应该知道i^2 = -1。而四元数其实和我们学到的这种是类似的，不同的是，它的虚部包含了三个虚数单位，i、j、k，即一个四元数可以表示为x = a + bi + cj + dk。那么，它和旋转为什么会有关系呢？ 在Unity里，tranform组件有一个变量名为rotation，它的类型就是四元数。很多初学者会直接取rotation的x、y、z，认为它们分别对应了Transform面板里R的各个分量。当然很快我们就会发现这是完全不对的。实际上，四元数的x、y、z和R的那三个值从直观上来讲没什么关系，当然会存在一个表达式可以转换，在后面会讲。 大家应该和我一样都有很多疑问，既然已经存在了这两种旋转表示方式，为什么还要使用四元数这种听起来很难懂的东西呢？我们先要了解这三种旋转方式的优缺点：</p>
<ul>
<li><strong>矩阵旋转</strong><ul>
<li>优点：<ul>
<li>旋转轴可以是任意向量；</li>
</ul>
</li>
<li>缺点：<ul>
<li>旋转其实只需要知道一个向量+一个角度，一共4个值的信息，但矩阵法却使用了16个元素；</li>
<li>而且在做乘法操作时也会增加计算量，造成了空间和时间上的一些浪费；</li>
</ul>
</li>
</ul>
</li>
<li><strong>欧拉旋转</strong><ul>
<li>优点：<ul>
<li>很容易理解，形象直观；</li>
<li>表示更方便，只需要3个值（分别对应x、y、z轴的旋转角度）；但按我的理解，它还是转换到了3个3*3的矩阵做变换，效率不如四元数；</li>
</ul>
</li>
<li>缺点：<ul>
<li>之前提到过这种方法是要按照一个固定的坐标轴的顺序旋转的，因此不同的顺序会造成不同的结果；</li>
<li>会造成<a href="http://zh.wikipedia.org/wiki/%E8%90%AC%E5%90%91%E9%8E%96" target="_blank" rel="noopener">万向节锁</a>（Gimbal Lock）的现象。这种现象的发生就是由于上述固定坐标轴旋转顺序造成的。理论上，欧拉旋转可以靠这种顺序让一个物体指到任何一个想要的方向，但如果在旋转中不幸让某些坐标轴重合了就会发生万向节锁，这时就会丢失一个方向上的旋转能力，也就是说在这种状态下我们无论怎么旋转（当然还是要原先的顺序）都不可能得到某些想要的旋转效果，除非我们打破原先的旋转顺序或者同时旋转3个坐标轴。这里有个<a href="http://v.youku.com/v_show/id_XNzkyOTIyMTI=.html" target="_blank" rel="noopener">视频</a>可以直观的理解下；</li>
<li>由于万向节锁的存在，欧拉旋转无法实现球面平滑插值；</li>
</ul>
</li>
</ul>
</li>
<li><strong>四元数旋转</strong><ul>
<li>优点：<ul>
<li>可以避免万向节锁现象；</li>
<li>只需要一个4维的四元数就可以执行绕任意过原点的向量的旋转，方便快捷，在某些实现下比旋转矩阵效率更高；</li>
<li>可以提供平滑插值；</li>
</ul>
</li>
<li>缺点：<ul>
<li>比欧拉旋转稍微复杂了一点点，因为多了一个维度；</li>
<li>理解更困难，不直观；</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="四元数和欧拉角"><a href="#四元数和欧拉角" class="headerlink" title="四元数和欧拉角"></a>四元数和欧拉角</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>前面说过，一个四元数可以表示为q = w + xi + yj + zk，现在就来回答这样一个简单的式子是怎么和三维旋转结合在一起的。为了方便，我们下面使用q = ((x, y, z)，w) = (v, w)，其中v是向量，w是实数，这样的式子来表示一个四元数。</p>
<p>我们先来看问题的答案。我们可以使用一个四元数q=((x,y,z)sinθ2, cosθ2) 来执行一个旋转。具体来说，如果我们想要把空间的一个点P绕着单位向量轴u = (x, y, z)表示的旋转轴旋转θ角度，我们首先把点P扩展到四元数空间，即四元数p = (P, 0)。那么，旋转后新的点对应的四元数（当然这个计算而得的四元数的实部为0，虚部系数就是新的坐标）为：</p>
<p>p′=qpq−1</p>
<p>其中，q=(cosθ2, (x,y,z)sinθ2) ，q−1=q∗N(q)，由于u是单位向量，因此 N(q)=1，即q−1=q∗。右边表达式包含了四元数乘法。相关的定义如下：</p>
<ul>
<li><p>四元数乘法：q1q2=(v1→×v2→+w1v2→+w2v1→,w1w2−v1→⋅v2→)</p>
</li>
<li><p>共轭四元数：q∗=(−v⃗ ,w)</p>
</li>
<li><strong>四元数的模：**</strong>N(q) = √(x^2 + y^2 + z^2 +w^2)，即四元数到原点的距离**</li>
<li>四元数的逆：q−1=q∗N(q)</li>
</ul>
<p>它的证明这里不再赘述，有兴趣的可以参见<a href="http://www.cnblogs.com/yiyezhai/p/3176725.html" target="_blank" rel="noopener">这篇文章</a>。主要思想是构建了一个辅助向量k，它是将p绕旋转轴旋转θ/2得到的。证明过程尝试证明wk∗=kv∗，以此证明w与v、k在同一平面内，且与v夹角为θ。</p>
<p>我们举个最简单的例子：把点P(1, 0, 1)绕旋转轴u = (0, 1, 0)旋转90°，求旋转后的顶点坐标。首先将P扩充到四元数，即p = (P, 0)。而q = (u*sin45°, cos45°)。求p′=qpq−1的值。建议大家一定要在纸上计算一边，这样才能加深印象，连笔都懒得动的人还是不要往下看了。最后的结果p` = ((1, 0, -1), 0)，即旋转后的顶点位置是(1, 0, -1)。</p>
<p>如果想要得到复合旋转，只需类似复合矩阵那样左乘新的四元数，再进行运算即可。</p>
<p>我们来总结下四元数旋转的<strong>几个需要注意的地方</strong>：</p>
<ul>
<li>用于旋转的四元数，每个分量的范围都在（-1，1）；</li>
<li>每一次旋转实际上需要两个四元数的参与，即q和q*；</li>
<li>所有用于旋转的四元数都是单位四元数，即它们的模是1；</li>
</ul>
<p>下面是几点建议：</p>
<ul>
<li>实际上，在Unity里即便你不知道上述公式和变换也丝毫不妨碍我们使用四元数，但是有一点要提醒你，<strong>除非你对四元数非常了解，那么不要直接对它们进行赋值</strong>。</li>
<li>如果你不想知道原理，只想在Unity里找到对应的函数来进行四元数变换，那么你可以使用这两个函数：<a href="http://docs.unity3d.com/ScriptReference/Quaternion.Euler.html" target="_blank" rel="noopener">Quaternion.Euler</a>和<a href="http://docs.unity3d.com/ScriptReference/Quaternion-eulerAngles.html" target="_blank" rel="noopener">Quaternion.eulerAngles</a>。它们基本可以满足绝大多数的四元数旋转变换。</li>
</ul>
<h2 id="和其他类型的转换"><a href="#和其他类型的转换" class="headerlink" title="和其他类型的转换"></a>和其他类型的转换</h2><p>首先是<strong>轴角到四元数</strong>：</p>
<p>给定一个单位长度的旋转轴(x, y, z)和一个角度θ。对应的四元数为：</p>
<p>q=((x,y,z)sinθ2, cosθ2)</p>
<p>这个公式的推导过程上面已经给出。</p>
<p><strong>欧拉角到四元数</strong>：</p>
<p>给定一个欧拉旋转(X, Y, Z)（即分别绕x轴、y轴和z轴旋转X、Y、Z度），则对应的四元数为：</p>
<p>x = sin(Y/2)sin(Z/2)cos(X/2)+cos(Y/2)cos(Z/2)sin(X/2) y = sin(Y/2)cos(Z/2)cos(X/2)+cos(Y/2)sin(Z/2)sin(X/2) z = cos(Y/2)sin(Z/2)cos(X/2)-sin(Y/2)cos(Z/2)sin(X/2) w = cos(Y/2)cos(Z/2)cos(X/2)-sin(Y/2)sin(Z/2)sin(X/2) q = ((x, y, z), w)</p>
<p>它的证明过程可以依靠轴角到四元数的公式进行推导。</p>
<p>其他<strong>参考链接</strong>：</p>
<ol>
<li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/index.htm" target="_blank" rel="noopener">Euler to Quaternion</a> 2. <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/index.htm" target="_blank" rel="noopener">Quaternion To Euler</a> 3. <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm" target="_blank" rel="noopener">AngleAxis to Quaternion</a> 4. <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm" target="_blank" rel="noopener">Quaternion to AngleAxis</a></li>
</ol>
<h1 id="四元数的插值"><a href="#四元数的插值" class="headerlink" title="四元数的插值"></a>四元数的插值</h1><p>这里的插值指的是球面线性插值。</p>
<p>设t是一个在0到1之间的变量。我们想要基于t求Q1到Q2之间插值后四元数Q。它的公式是：</p>
<p>Q3  = (sin((1-t)A)/sin(A))*Q1 + (sin((tA)/sin(A))*Q2)</p>
<p>Q = Q3/|Q3|，即单位化</p>
<h1 id="四元数的创建"><a href="#四元数的创建" class="headerlink" title="四元数的创建"></a>四元数的创建</h1><p>在了解了上述知识后，我们就不需要那么惧怕四元数了，实际上它和矩阵类似，不同的只是它的表示方式以及运算方式。那么在Unity里如何利用四元数进行旋转呢？Unity里提供了非常多的方式来创建一个四元数。例如Quaternion.AngleAxis(float angle, Vector3 axis)，它可以返回一个绕轴线axis旋转angle角度的四元数变换。我们可以一个Vector3和它进行左乘，就将得到旋转后的Vector3。在Unity里只需要用一个“ * ”操作符就可以进行四元数对向量的变换操作，相当于我们上述讲到的p′=qpq−1操作。如果我们想要进行多个旋转变换，只需要左乘其他四元数变换即可。例如下面这样：</p>
<pre><code>Vector3 newVector = Quaternion.AngleAxis(90, Vector3.up) * Quaternion.LookRotation(someDirection) * someVector;
</code></pre><p>尽管欧拉角更容易我们理解，但四元数比欧拉角要强大很多。Unity提供了这两种方式供我们选择，我们可以选择最合适的变换。</p>
<p>例如，如果我们需要对旋转进行插值，我们可以首先使用Quaternion.eulerAngles来得到欧拉角度，然后使用Mathf.Clamp对其进行插值运算。</p>
<p>最后更新Quaternion.eulerAngles或者使用Quaternion.Euler(yourAngles)来创建一个新的四元数。</p>
<p>又例如，如果你想要组合旋转，比如让人物的脑袋向下看或者旋转身体，两种方法其实都可以，但一旦这些旋转不是以世界坐标轴为旋转轴，比如人物扭动脖子向下看等，那么四元数是一个更合适的选择。Unity还提供了transform.forward, transform.right and transform.up 这些非常有用的轴，这些轴可以和Quaternion.AngleAxis组合起来，来创建非常有用的旋转组合。例如，下面的代码让物体执行低头的动作：</p>
<pre><code>transform.rotation = Quaternion.AngleAxis(degrees, transform.right) * transform.rotation;
</code></pre><p>关于Quaternion的其他函数，后面再补充吧，原理类似~</p>
<h1 id="补充：欧拉旋转"><a href="#补充：欧拉旋转" class="headerlink" title="补充：欧拉旋转"></a>补充：欧拉旋转</h1><p>在文章开头关于欧拉旋转的细节没有解释的太清楚，而又有不少人询问相关问题，我尽量把自己的理解写到这里，如有不对还望指出。</p>
<h2 id="欧拉旋转是怎么运作的"><a href="#欧拉旋转是怎么运作的" class="headerlink" title="欧拉旋转是怎么运作的"></a>欧拉旋转是怎么运作的</h2><p>欧拉旋转是我们最容易理解的一种旋转方式。以我们生活中为例，一个舞蹈老师告诉我们，完成某个舞蹈动作需要先向你的左边转30°，再向左侧弯腰60°，再起身向后弯腰90°（如果你能办到的话）。上面这样一个旋转的过程其实和我们在三维中进行欧拉旋转很类似，即我们是通过指明绕三个轴旋转的角度来进行旋转的，不同的是，日常生活中我们更愿意叫这些轴为前后左右上下。而这也意味着我们需要指明一个旋转顺序。这是因为，先绕X轴旋转90°、再绕Y轴30°和先绕Y轴旋转90°、再绕X轴30°得到的是不同的结果。</p>
<p>在Unity里，欧拉旋转的旋转顺序是Z、X、Y，这在相关的API文档中都有说明，例如<a href="http://docs.unity3d.com/ScriptReference/Transform.Rotate.html" target="_blank" rel="noopener">Transform.Rotate</a>。其实文档中说得不是非常详细，还有一个细节我们需要明白。如果你仔细想想，就会发现有一个非常重要的东西我们没有说明白，那就是旋转时使用的坐标系。给定一个旋转顺序（例如这里的Z、X、Y），以及它们对应的旋转角度（α，β，r），有两种坐标系可以选择：</p>
<ol>
<li>绕坐标系E下的Z轴旋转α，绕坐标系E下的Y轴旋转β，绕坐标系E下的X轴旋转r，即进行一次旋转时不一起旋转当前坐标系；</li>
<li>绕坐标系E下的Z轴旋转α，绕坐标系E在绕Z轴旋转α后的新坐标系E’下的Y轴旋转β，绕坐标系E’在绕Y轴旋转β后的新坐标系E’’下的X轴旋转r， 即在旋转时，把坐标系一起转动；</li>
</ol>
<p>很容易知道，这两种选择的结果是不一样的。但如果把它们的旋转顺序颠倒一下，其实结果就会一样。说得明白点，在第一种情况下、按ZXY顺序旋转和在第二种情况下、按YXZ顺序旋转是一样的。证明方法可以看下<a href="http://www.cnitblog.com/luckydmz/archive/2010/09/07/68674.html" target="_blank" rel="noopener">这篇文章</a>。而Unity文档中说明的旋转顺序指的是在第一种情况下的顺序。</p>
<p>如果你还是不懂这意味着什么，可以试着调用下这个函数。例如，你认为下面代码的结果是什么：</p>
<pre><code>transform.Rotate(new Vector3(0, 30, 90));
</code></pre><p>原模型的方向和执行结果如下：</p>
<p><img src="https://img-blog.csdn.net/20150211171430220?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="https://img-blog.csdn.net/20150211174626667?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>而我们可以再分别执行下面的代码：</p>
<p>// First case</p>
<p>transform.Rotate(new Vector3(0, 30, 0));</p>
<p>transform.Rotate(new Vector3(0, 0, 90));</p>
<p>// Second case</p>
<p>// transform.Rotate(new Vector3(0, 0, 90));</p>
<p>// transform.Rotate(new Vector3(0, 30, 0));</p>
<p>两种情况的结果分别是：</p>
<p><img src="https://img-blog.csdn.net/20150211175051166?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="https://img-blog.csdn.net/20150211175102507?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>可以发现，调用transform.Rotate(new Vector3(0, 30, 90));是和第一种情况中的代码是一样的结果，即先旋转Y、再旋转Z。进一步实验，我们会发现transform.Rotate(new Vector3(30, 90, -40));的结果是和transform.Rotate(new Vector3(0, 90, 0));transform.Rotate(new Vector3(30, 0, 0));transform.Rotate(new Vector3(0, 0, -40));的结果一样的。你会问了，文档中不是明明说了旋转顺序是Z、X、Y吗？怎么现在完全反过来了呢？原因就是我们之前说的两种坐标系的选择。在一次调用transform.Rotate的过程中，坐标轴是不随每次单个坐标轴的旋转而旋转的。而在调用transform.Rotate后，这个旋转坐标系才会变化。也就是说，transform.Rotate(new Vector3(30, 90, -40));执行时使用的是第一种情况，而transform.Rotate(new Vector3(0, 90, 0));transform.Rotate(new Vector3(30, 0, 0));transform.Rotate(new Vector3(0, 0, -40));每一句则是分别使用了上一句执行后的坐标系，即第二种坐标系情况。因此，我们看起来顺序好像是完全是反了，但结果是一样的。</p>
<p>上面只是说了一些容易混淆的地方，更多的内容大家可以搜搜wiki之类的。</p>
<h2 id="数学模型"><a href="#数学模型" class="headerlink" title="数学模型"></a>数学模型</h2><p>欧拉旋转的数学实现就是使用矩阵。而最常见的表示方法就是3*3的矩阵。在<a href="http://en.wikipedia.org/wiki/Gimbal_lock" target="_blank" rel="noopener">Wiki</a>里我们可以找到这种矩阵的表示形式，以下以按XYZ的旋转顺序为例，三个矩阵分别表示了：</p>
<p><img src="https://img-blog.csdn.net/20150212102526686?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>在计算时，我们将原来的旋转矩阵右乘（这里使用的是列向量）上面的矩阵。从这里我们也可以证明上面所说的两种坐标系选择是一样的结果，它们之间的不同从这里来看其实就是矩阵相乘时的顺序不同。第一种坐标系情况，指的是在计算时，先从左到右直接计算R中3个矩阵的结果矩阵，最后再和原旋转矩阵相乘，因此顺序是XYZ；而第二种坐标系情况，指的是在计算时，从右往左依次相乘，因此顺序是反过来的，ZYX。你可以验证R左乘和右乘的结果表达式，就可以相信这个结论了！</p>
<h2 id="万向节锁"><a href="#万向节锁" class="headerlink" title="万向节锁"></a>万向节锁</h2><p>虽然欧拉旋转非常容易理解，但它会造成臭名昭著的万向节锁问题。我之前给出了链接大家可能都看了，但还是不明白这是怎么回事。这里<a href="http://blog.csdn.net/huazai434/article/details/6458257" target="_blank" rel="noopener">有一篇文章</a>是我目前找到说得最容易懂的中文文章，大家可以看看。</p>
<p>如果你还是不明白，我们来做个试验。还是使用之前的模型，这次我们直接在面板中把它的欧拉角中的X值设为90°，其他先保持不变：</p>
<p><img src="https://img-blog.csdn.net/20150211224049536?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>此时模型是脸朝下（下图你看到的只是一个头顶）：</p>
<p><img src="https://img-blog.csdn.net/20150211224515155?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>现在，如果我让你不动X轴，只设置Y和Z的值，把这个模型的脸转上来，让它向侧面看，你可以办到吗？你可以发现，这时候无论你怎么设置Y和Z的值，模型始终是脸朝下、在同一平面旋转，看起来就是Y和Z控制的是同一个轴的旋转，下面是我截取的任意两种情况：</p>
<p><img src="https://img-blog.csdn.net/20150211224905630?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt> <img src="https://img-blog.csdn.net/20150211224916768?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>这就是一种万向节锁的情况。这里我们先设置X轴为90°也是有原因的，这是因为Unity中欧拉角的旋转顺序是ZXY，即X轴是第二个旋转轴。当我们在面板中设置任意旋转值时，Unity实际是按照固定的ZXY顺序依次旋转特定角度的。</p>
<p>在代码里，我们同样可以重现万向节锁现象。</p>
<p>transform.Rotate(new Vector3(0, 0, 40));</p>
<p>transform.Rotate(new Vector3(0, 90, 0));</p>
<p>transform.Rotate(new Vector3(80, 0, 0));</p>
<p>我们只需要固定中间一句代码，即使Y轴的旋转角度始终为90°，那么你会发现无论你怎么调整第一句和最后一句中的X或Z值，它会像一个钟表的表针一样总是在同一个平面上运动。</p>
<p>万向节锁中的“锁”，其实是给人一种误导，这可能也是让很多人觉得难以理解的一个原因。实际上，实际上它并没有锁住任何一个旋转轴，只是说我们会在这种旋转情况下会感觉丧失了一个维度。以上面的例子来说，尽管固定了第二个旋转轴的角度为90°，但我们原以为依靠改变其他两个轴的旋转角度是可以得到任意旋转位置的（因为按我们理解，两个轴应该控制的是两个空间维度），而事实是它被“锁”在了一个平面，即只有一个维度了，缺失了一个维度。而只要第二个旋转轴不是±90°，我们就可以依靠改变其他两个轴的旋转角度来得到任意旋转位置。</p>
<h2 id="数学解释"><a href="#数学解释" class="headerlink" title="数学解释"></a>数学解释</h2><p>我们从最简单的矩阵来理解。还是使用XYZ的旋转顺序。当Y轴的旋转角度为90°时，我们会得到下面的旋转矩阵：</p>
<p><img src="https://img-blog.csdn.net/20150212105617286?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>我们对上述矩阵进行左乘可以得到下面的结果：</p>
<p><img src="https://img-blog.csdn.net/20150212105800681?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p>
<p>可以发现，此时当我们改变第一次和第三次的旋转角度时，是同样的效果，而不会改变第一行和第三列的任何数值，从而缺失了一个维度。</p>
<p>我们再尝试着理解下它的本质。<a href="http://en.wikipedia.org/wiki/Gimbal_lock" target="_blank" rel="noopener">Wiki</a>上写，万向节锁出现的本质原因，是因为从欧拉角到旋转的映射并不是一个覆盖映射，即它并不是在每个点处都是局部同胚的。不懂吧。。。恩，我们再来通俗一下解释，这意味着，从欧拉角到旋转是一个多对一的映射（即不同的欧拉角可以表示同一个旋转方向），而且并不是每一个旋转变化都可以用欧拉角来表示。其他更多的大家去参考wiki吧。</p>
<p>建议还是多看看视频，尤其是后面的部分。当然，如果还是觉得懵懵懂懂的话，在《3D数学基础：图形与游戏开发》一书中有一话说的很有道理，“如果您从来没有遇到过万向锁情况，你可能会对此感到困惑，而且不幸的是，很难在本书中讲清楚这个问题，你需要亲身经历才能明白。”因此，大家也不要纠结啦，等到遇到的时候可以想到是因为万向节锁的原因就好。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/03/24/vue-js-e8-a1-a8-e6-a0-bc-e7-bb-84-e4-bb-b6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/03/24/vue-js-e8-a1-a8-e6-a0-bc-e7-bb-84-e4-bb-b6/" itemprop="url">Vue.js 表格组件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-24T00:14:12+08:00">
                2018-03-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"target"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  JS：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Vue组件开始</span></span><br><span class="line"><span class="keyword">var</span> Grid = Vue.extend(&#123;</span><br><span class="line">    template: <span class="string">'&lt;table class="table" :class="&#123;layoutFixed: config.layoutFixed&#125;"&gt;\</span></span><br><span class="line"><span class="string">                &lt;thead&gt;\</span></span><br><span class="line"><span class="string">                    &lt;tr&gt;\</span></span><br><span class="line"><span class="string">                        &lt;th v-for="col in config.colModel" \</span></span><br><span class="line"><span class="string">                        v-if="col.sort" \</span></span><br><span class="line"><span class="string">                        :width="col.width" \</span></span><br><span class="line"><span class="string">                        :col="col.name" \</span></span><br><span class="line"><span class="string">                        :title="removeTag(col.display)" &gt;\</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        &lt;div class="sort ellipsis" :sortType="col.sortType"&gt;&#123; &#123;col.display&#125;&#125;\</span></span><br><span class="line"><span class="string">                        &lt;i class="icon-chevron-up" @click="sortUp"&gt;&lt;/i&gt;\</span></span><br><span class="line"><span class="string">                        &lt;i class="icon-chevron-down" @click="sortDown"&gt;&lt;/i&gt;\</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;&lt;/th&gt;\</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">​                        &lt;th v-else \</span></span><br><span class="line"><span class="string">​                        class="ellipsis"\</span></span><br><span class="line"><span class="string">​                        :width="col.width" \</span></span><br><span class="line"><span class="string">​                        :col="col.name" \</span></span><br><span class="line"><span class="string">​                        :title="removeTag(col.display)" &gt;&#123; &#123;col.display&#125;&#125;&lt;/th&gt;\</span></span><br><span class="line"><span class="string">​                    &lt;/tr&gt;\</span></span><br><span class="line"><span class="string">​                &lt;/thead&gt;\</span></span><br><span class="line"><span class="string">​                &lt;tbody&gt;\</span></span><br><span class="line"><span class="string">​                    &lt;tr v-for="row in resData.rows"&gt;\</span></span><br><span class="line"><span class="string">​                        &lt;td v-for="col in config.colModel"\</span></span><br><span class="line"><span class="string">​                        :title="removeTag(row\[col.name\])" v-handle="&#123;handler:col.handler, v:row\[col.name\], data:row&#125;"&gt;&#123; &#123;row\[col.name\]&#125;&#125;&lt;/td&gt;\</span></span><br><span class="line"><span class="string">​                    &lt;/tr&gt;\</span></span><br><span class="line"><span class="string">​                &lt;/tbody&gt;\</span></span><br><span class="line"><span class="string">​            &lt;/table&gt;'</span>,</span><br><span class="line">​    data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">​        <span class="keyword">return</span> &#123;</span><br><span class="line">​            url: <span class="string">''</span>,</span><br><span class="line">​            config: &#123;&#125;,</span><br><span class="line">​            param: &#123;&#125;,</span><br><span class="line">​            resData: &#123;&#125;</span><br><span class="line">​        &#125;;</span><br><span class="line">​    &#125;,</span><br><span class="line">​    computed: &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    getData: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: <span class="keyword">this</span>.url,</span><br><span class="line">            type: <span class="string">'GET'</span>,</span><br><span class="line">            data: <span class="keyword">this</span>.param,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">json</span>) </span>&#123;</span><br><span class="line">                json = <span class="built_in">JSON</span>.parse(json);</span><br><span class="line">                self.resData = json.data;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    sortUp: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        $.extend(<span class="keyword">this</span>.param, &#123;</span><br><span class="line">            sortType: $(event.target).parent().attr(<span class="string">'sorttype'</span>),</span><br><span class="line">            orderType: <span class="string">"1"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.getData();</span><br><span class="line">    &#125;,</span><br><span class="line">    sortDown: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        $.extend(<span class="keyword">this</span>.param, &#123;</span><br><span class="line">            sortType: $(event.target).parent().attr(<span class="string">'sorttype'</span>),</span><br><span class="line">            orderType: <span class="string">"2"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.getData();</span><br><span class="line">    &#125;,</span><br><span class="line">    removeTag: <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str) &#123;</span><br><span class="line">            str = str.toString();</span><br><span class="line">            <span class="keyword">return</span> str.replace(<span class="regexp">/&lt;("\[^"\]*"|'\[^'\]*'|\[^"'&gt;\])&gt;/g</span>, <span class="string">''</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    log: <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">directives: &#123;</span><br><span class="line">    handle: &#123;</span><br><span class="line">        inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> handler = binding.value.handler;</span><br><span class="line">            <span class="keyword">if</span> (handler &amp;&amp; $.isFunction(handler)) &#123;</span><br><span class="line">                handler(binding.value.v, binding.value.data, $(el), $(el).parent(<span class="string">'tr'</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getData();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Vue.component(<span class="string">'grid'</span>, Grid);</span><br><span class="line"><span class="comment">//Vue组件结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Vue实例开始</span></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Grid(&#123;</span><br><span class="line">    el: config.renderTo,</span><br><span class="line">    data: &#123;</span><br><span class="line">        url: config.url,</span><br><span class="line">        config: config</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建Vue实例结束</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/03/24/e6-80-8e-e4-b9-88-e4-bd-bf-e7-94-a8-e6-ad-a3-e5-88-99-e8-a1-a8-e8-be-be-e5-bc-8f-e5-ae-8c-e7-be-8e-e5-8c-b9-e9-85-8dhtml-e6-a0-87-e7-ad-be-ef-bc-88-e4-bb-85-e6-a0-87-e7-ad-be-ef-bc-89-ef-bc-9f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/03/24/e6-80-8e-e4-b9-88-e4-bd-bf-e7-94-a8-e6-ad-a3-e5-88-99-e8-a1-a8-e8-be-be-e5-bc-8f-e5-ae-8c-e7-be-8e-e5-8c-b9-e9-85-8dhtml-e6-a0-87-e7-ad-be-ef-bc-88-e4-bb-85-e6-a0-87-e7-ad-be-ef-bc-89-ef-bc-9f/" itemprop="url">怎么使用正则表达式完美匹配HTML标签？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-24T00:08:54+08:00">
                2018-03-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/前端/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转自腾讯前端博客：<a href="http://imweb.io/topic/56e804ef1a5f05dc50643106" target="_blank" rel="noopener">http://imweb.io/topic/56e804e…</a></p>
<hr>
<p>匹配HTML标签嘛，感觉很简单的样子，我们的第一反应可能是：<code>var pattern = /&lt;[^&gt;]+&gt;/</code> 不过这样匹配可能存在的问题是：如果tag中含有<code>&gt;</code>，上面的正则就不能正常匹配了。如： <code>&lt;input name=123 value=&quot;&gt;&quot; &gt;</code> <img src="https://sfault-image.b0.upaiyun.com/247/730/2477308083-58d34691bcbe1" alt="https://sfault-image.b0.upaiyun.com/247/730/2477308083-58d34691bcbe1"> 虽然上面这种HTML的写法很少(sha)见(bi)，但确实合法的。因此，简单的<code>&lt;[^&gt;]+&gt;</code>就不能用了，需要想个聪明点的办法。 我们先来看一下HTML Tag中有什么规则：<code>&lt;...&gt;</code>中能够出现 引用文本（被单引号或双引号包裹的） 非引用形式的“其他文本”（包括除了<code>&gt;</code>和引号之外的任何字符）</p>
<p>引用文本：HTML中的引文可以用双引号，也可以用单引号，但不允许嵌套转义的引号。</p>
<p>因此我们可以使用<code>/(&quot;[^&quot;]*&quot;|&#39;[^&#39;]*&#39;)/</code>来匹配。</p>
<p>其他文本：除了&gt;和引号之外的任意字符</p>
<p>可以使用<code>/[^&#39;&quot;&gt;]/</code>来匹配 现在可以得出匹配HTML Tag的正则表达式最终版！</p>
<p>var pattern = /&lt;(“[^”]<em>“|’[^’]</em>‘|[^’”&gt;])*&gt;/</p>
<p>给这个正则表达式来点注释：</p>
<p>&lt;                # 开始的尖括号”&lt;”<br>    (            #     任意数量的…<br>        “[^”]*“  #         双引号字符串<br>        |        #         或者是…<br>        ‘[^’]*‘  #         单引号字符串<br>        |        #         或者是…<br>        [^’”&gt;]   #         “其他文本”<br>    )*           #<br>>                # 结束的尖括号”&gt;”</p>
<p><strong>需要注意的是</strong>，我们不用”+”来修饰<code>[^&#39;&quot;&gt;]</code>的原因是<code>([^&#39;&quot;&gt;]+)*</code>可能会带来灾难性的后果。匹配次数呈指数级增长。比如：对于简单的目标字符串helloworld，是星号会迭代10次，每一次迭代中<code>[^&#39;&quot;&gt;]+</code>匹配一个字符？还是星号迭代3次，内部的<code>[^&#39;&quot;&gt;]+</code>分别匹配5、2、3个字符？或者2、3、1、4个字符？还是其他情况？这样会把正则引擎搞疯掉的啦！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/03/24/react-starter-kit-e5-ad-a6-e4-b9-a0-e7-ac-94-e8-ae-b0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/03/24/react-starter-kit-e5-ad-a6-e4-b9-a0-e7-ac-94-e8-ae-b0/" itemprop="url">React Starter Kit 学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-24T00:02:44+08:00">
                2018-03-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>根据<a href="http://reactjs.cn/react/docs/getting-started.html" target="_blank" rel="noopener">http://reactjs.cn/react/docs/…</a>页面中Starter Kit 15.3.1中的例子汇总修改而成。</p>
<hr>
<p>HTML代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;React test&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;react_transition.css&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;lib/react-with-addons.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;lib/react-dom.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;lib/browser.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;container1&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container2&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container3&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container4&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container5&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container6&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container7&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container8&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container9&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;container10&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;react_test.js&quot; type=&quot;text/babel&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>JS代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container1 = <span class="built_in">document</span>.getElementById(<span class="string">'container1'</span>)</span><br><span class="line"><span class="keyword">const</span> container2 = <span class="built_in">document</span>.getElementById(<span class="string">'container2'</span>)</span><br><span class="line"><span class="keyword">const</span> container3 = <span class="built_in">document</span>.getElementById(<span class="string">'container3'</span>)</span><br><span class="line"><span class="keyword">const</span> container4 = <span class="built_in">document</span>.getElementById(<span class="string">'container4'</span>)</span><br><span class="line"><span class="keyword">const</span> container5 = <span class="built_in">document</span>.getElementById(<span class="string">'container5'</span>)</span><br><span class="line"><span class="keyword">const</span> container6 = <span class="built_in">document</span>.getElementById(<span class="string">'container6'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//1 'Hello' + name</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> &gt;</span> Hello, &#123; props.name &#125; <span class="tag">&lt; /<span class="attr">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt; <span class="attr">Welcome</span> <span class="attr">name</span> = <span class="string">"Diary"</span> / &gt;</span> ;</span></span><br><span class="line"><span class="xml">ReactDOM.render(</span></span><br><span class="line"><span class="xml">    element,</span></span><br><span class="line"><span class="xml">    container1</span></span><br><span class="line"><span class="xml">);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//2 流逝时间计时器</span></span><br><span class="line"><span class="xml">var Elapsed = React.createClass(&#123;</span></span><br><span class="line"><span class="xml">    render: function () &#123;</span></span><br><span class="line"><span class="xml">        var elapsed = Math.round(this.props.elapsed / 100);</span></span><br><span class="line"><span class="xml">        var seconds = elapsed / 10 + (elapsed % 10 ? '' : '.0');</span></span><br><span class="line"><span class="xml">        var message =</span></span><br><span class="line"><span class="xml">            'React has been successfully running for ' + seconds + ' seconds.';</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">​    return <span class="tag">&lt;<span class="name">p</span> &gt;</span> &#123; message &#125; <span class="tag">&lt; /<span class="attr">p</span>&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">&#125;);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">var start = new Date().getTime();</span></span><br><span class="line"><span class="xml">setInterval(function () &#123;</span></span><br><span class="line"><span class="xml">    ReactDOM.render( <span class="tag">&lt; <span class="attr">Elapsed</span> <span class="attr">elapsed</span> = <span class="string">&#123;</span> <span class="attr">new</span> <span class="attr">Date</span>()<span class="attr">.getTime</span>() <span class="attr">-</span> <span class="attr">start</span> &#125;</span></span></span><br><span class="line"><span class="xml">        / \&gt; ,</span></span><br><span class="line"><span class="xml">        container2</span></span><br><span class="line"><span class="xml">    );</span></span><br><span class="line"><span class="xml">&#125;, 50);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//3 按钮点击计数</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">var Counter = React.createClass(&#123;</span></span><br><span class="line"><span class="xml">    getInitialState: function () &#123;</span></span><br><span class="line"><span class="xml">        return &#123; </span></span><br><span class="line"><span class="xml">            count: 2,</span></span><br><span class="line"><span class="xml">            sum: 100</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    handleClick: function () &#123;</span></span><br><span class="line"><span class="xml">        this.setState(&#123;</span></span><br><span class="line"><span class="xml">            count: this.state.count * this.state.count,</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    handleDoubleClick: function () &#123;</span></span><br><span class="line"><span class="xml">        this.setState(&#123;</span></span><br><span class="line"><span class="xml">            count: 2,</span></span><br><span class="line"><span class="xml">            sum: 1000</span></span><br><span class="line"><span class="xml">        &#125;)</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    render: function () &#123;</span></span><br><span class="line"><span class="xml">        return ( </span></span><br><span class="line"><span class="xml">            <span class="tag">&lt; <span class="attr">button</span> <span class="attr">onClick</span> = <span class="string">&#123;</span> <span class="attr">this.handleClick</span> &#125; <span class="attr">onDoubleClick</span> = <span class="string">&#123;</span> <span class="attr">this.handleDoubleClick</span> &#125;&gt;</span></span></span><br><span class="line"><span class="xml">            sum - count: &#123; this.state.sum - this.state.count &#125; <span class="tag">&lt; /<span class="attr">button</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">ReactDOM.render( <span class="xml"><span class="tag">&lt; <span class="attr">Counter</span> / &gt;</span> ,</span></span><br><span class="line"><span class="xml">    container3</span></span><br><span class="line"><span class="xml">);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//4 流逝时间计时器（ES6写法）</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">class ExampleApplication extends React.Component &#123;</span></span><br><span class="line"><span class="xml">    render() &#123;</span></span><br><span class="line"><span class="xml">        var elapsed = Math.round(this.props.elapsed / 100);</span></span><br><span class="line"><span class="xml">        var seconds = elapsed / 10 + (elapsed % 10 ? '' : '.0');</span></span><br><span class="line"><span class="xml">        var message =</span></span><br><span class="line"><span class="xml">            `React has been successfully running for $&#123;seconds&#125; seconds.`;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">​    	return <span class="tag">&lt;<span class="name">p</span> &gt;</span> &#123; message &#125; <span class="tag">&lt; /<span class="attr">p</span>&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">var start = new Date().getTime();</span></span><br><span class="line"><span class="xml">setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">    ReactDOM.render( <span class="tag">&lt; <span class="attr">ExampleApplication</span> <span class="attr">elapsed</span> = <span class="string">&#123;</span> <span class="attr">new</span> <span class="attr">Date</span>()<span class="attr">.getTime</span>() <span class="attr">-</span> <span class="attr">start</span> &#125;/&gt;</span>,</span></span><br><span class="line"><span class="xml">        container4</span></span><br><span class="line"><span class="xml">    );</span></span><br><span class="line"><span class="xml">&#125;, 50);</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//5 实时求解一元二次方程</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">var QuadraticCalculator = React.createClass(&#123;</span></span><br><span class="line"><span class="xml">  getInitialState: function() &#123;</span></span><br><span class="line"><span class="xml">    return &#123;</span></span><br><span class="line"><span class="xml">      a: 1,</span></span><br><span class="line"><span class="xml">      b: 3,</span></span><br><span class="line"><span class="xml">      c: -4</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  /\*\*</span></span><br><span class="line"><span class="xml">   \* This function will be re-bound in render multiple times. Each .bind() will</span></span><br><span class="line"><span class="xml">   \* create a new function that calls this with the appropriate key as well as</span></span><br><span class="line"><span class="xml">   \* the event. The key is the key in the state object that the value should be</span></span><br><span class="line"><span class="xml">   \* mapped from.</span></span><br><span class="line"><span class="xml">   */</span></span><br><span class="line"><span class="xml">  handleInputChange: function(key, event) &#123;</span></span><br><span class="line"><span class="xml">    var partialState = &#123;&#125;;</span></span><br><span class="line"><span class="xml">    partialState\[key\] = parseFloat(event.target.value);</span></span><br><span class="line"><span class="xml">    this.setState(partialState);</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  render: function() &#123;</span></span><br><span class="line"><span class="xml">    var a = this.state.a;</span></span><br><span class="line"><span class="xml">    var b = this.state.b;</span></span><br><span class="line"><span class="xml">    var c = this.state.c;</span></span><br><span class="line"><span class="xml">    var root = Math.sqrt(Math.pow(b, 2) - 4 * a * c);</span></span><br><span class="line"><span class="xml">    var denominator = 2 * a;</span></span><br><span class="line"><span class="xml">    var x1 = (-b + root) / denominator;</span></span><br><span class="line"><span class="xml">    var x2 = (-b - root) / denominator;</span></span><br><span class="line"><span class="xml">    return (</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;strong&gt;</span><br><span class="line">          &lt;em&gt;ax&lt;/em&gt;&lt;sup&gt;2&lt;/sup&gt; + &lt;em&gt;bx&lt;/em&gt; + &lt;em&gt;c&lt;/em&gt; = 0</span><br><span class="line">        &lt;/strong&gt;</span><br><span class="line">        &lt;h4&gt;Solve for &lt;em&gt;x&lt;/em&gt;:&lt;/h4&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          &lt;label&gt;</span><br><span class="line">            a: &lt;input type="number" value=&#123;a&#125; onChange=&#123;this.handleInputChange.bind(null, 'a')&#125; /&gt;</span><br><span class="line">          &lt;/label&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;label&gt;</span><br><span class="line">            b: &lt;input type="number" value=&#123;b&#125; onChange=&#123;this.handleInputChange.bind(null, 'b')&#125; /&gt;</span><br><span class="line">          &lt;/label&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;label&gt;</span><br><span class="line">            c: &lt;input type="number" value=&#123;c&#125; onChange=&#123;this.handleInputChange.bind(null, 'c')&#125; /&gt;</span><br><span class="line">          &lt;/label&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          x: &lt;strong&gt;&#123;x1&#125;, &#123;x2&#125;&lt;/strong&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">​    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;QuadraticCalculator /&gt;,</span><br><span class="line">  container5</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">//6 调用React组件CSSTransitionGroup制作动画效果</span><br><span class="line"></span><br><span class="line">var CSSTransitionGroup = React.addons.CSSTransitionGroup;</span><br><span class="line">var INTERVAL = 2000;</span><br><span class="line"></span><br><span class="line">var AnimateDemo = React.createClass(&#123;</span><br><span class="line">getInitialState: function() &#123;</span><br><span class="line">  return &#123;current: 0&#125;;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">componentDidMount: function() &#123;</span><br><span class="line">  this.interval = setInterval(this.tick, INTERVAL);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">componentWillUnmount: function() &#123;</span><br><span class="line">  clearInterval(this.interval);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">tick: function() &#123;</span><br><span class="line">  this.setState(&#123;current: this.state.current + 1&#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">render: function() &#123;</span><br><span class="line">  var children = \[\];</span><br><span class="line">  var colors = \['#fac', '#cdc', '#36d', '#ca0', '#0aa'\];</span><br><span class="line">  for (var i = this.state.current, pos=0; i &lt; this.state.current + colors.length; i++, pos++) &#123;</span><br><span class="line">    var style = &#123;</span><br><span class="line">      left: pos * 128,</span><br><span class="line">      background: colors\[i % colors.length\]</span><br><span class="line">    &#125;;</span><br><span class="line">    children.push(&lt;div key=&#123;i&#125; className="animateItem" style=&#123;style&#125;&gt;&#123;i&#125;&lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">  return (</span><br><span class="line">    &lt;CSSTransitionGroup</span><br><span class="line">      className="animateExample"</span><br><span class="line">      transitionEnterTimeout=&#123;250&#125;</span><br><span class="line">      transitionLeaveTimeout=&#123;250&#125;</span><br><span class="line">      transitionName="example"&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;/CSSTransitionGroup&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">&lt;AnimateDemo /&gt;,</span><br><span class="line">container6</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<hr>
<p>CSS代码（仅在例6中使用）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example-enter</span>,</span><br><span class="line"><span class="selector-class">.example-leave</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: all .<span class="number">25s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-enter</span>,</span><br><span class="line"><span class="selector-class">.example-leave</span><span class="selector-class">.example-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-leave</span><span class="selector-class">.example-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">128px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-enter</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">128px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-enter</span><span class="selector-class">.example-enter-active</span>,</span><br><span class="line"><span class="selector-class">.example-leave</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.animateExample</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">128px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">384px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.animateItem</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">128px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">128px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: all .<span class="number">25s</span>; <span class="comment">/* <span class="doctag">TODO:</span> make this a move animation */</span></span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">25s</span>; <span class="comment">/* <span class="doctag">TODO:</span> make this a move animation */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">128px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/03/23/javascript-e9-97-ad-e5-8c-85-e5-8e-9f-e7-90-86-e5-88-86-e6-9e-90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/03/23/javascript-e9-97-ad-e5-8c-85-e5-8e-9f-e7-90-86-e5-88-86-e6-9e-90/" itemprop="url">JavaScript闭包原理分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-23T23:53:03+08:00">
                2018-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>写了几个小例子揭示JS中闭包的本质，适合自己运行后分析。</p>
<hr>
<p>HTML文件  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/jquery-3.1.0.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"closure_example.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>0<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"display:none"</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>什么是闭包<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<p>JS代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">给6个按钮绑定事件，点击打印按钮的序号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    $(<span class="string">'button'</span>).eq(i).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">解决方案一：借用DOM元素的属性存储序号i</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    $(<span class="string">'button'</span>).eq(i).attr(<span class="string">'i'</span>, i).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log($(<span class="keyword">this</span>).attr(<span class="string">'i'</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">解决方案二：利用IIFE将i作为参数传递给内部函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'button'</span>).eq(i).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">错误方案：IIFE使用位置错误</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    $(<span class="string">'button'</span>).eq(i).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;)(i);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">解决方案三：利用IIFE所创造的“块级作用域”，将i赋值给局部变量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> temp = i;</span><br><span class="line">        $(<span class="string">'button'</span>).eq(temp).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(temp);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">什么是闭包？</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closure</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        i++;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = closure();</span><br><span class="line">foo();</span><br><span class="line">foo();</span><br><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = closure();</span><br><span class="line">bar();</span><br><span class="line">bar();</span><br><span class="line">bar();</span><br><span class="line"></span><br><span class="line">$(<span class="string">'.hide'</span>).show().on(<span class="string">'click'</span>, foo)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://diarychris.info/blog/blog/2018/03/10/e6-95-b0-e6-8d-ae-e7-bb-93-e6-9e-84-e4-b8-8e-e7-ae-97-e6-b3-95-ef-bc-88c-ef-bc-89-e4-bb-a3-e7-a0-81-e7-bb-83-e4-b9-a0-ef-bc-88pta-e9-a2-98-e7-9b-ae-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Diary">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Diary's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/03/10/e6-95-b0-e6-8d-ae-e7-bb-93-e6-9e-84-e4-b8-8e-e7-ae-97-e6-b3-95-ef-bc-88c-ef-bc-89-e4-bb-a3-e7-a0-81-e7-bb-83-e4-b9-a0-ef-bc-88pta-e9-a2-98-e7-9b-ae-ef-bc-89/" itemprop="url">数据结构与算法（C++）代码练习（PTA题目）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-10T23:03:03+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>所有代码均由Microsoft Visual Studio 2015编译通过</em>      </p>
<h4 id="在线算法输出N个整数的最大子列和"><a href="#在线算法输出N个整数的最大子列和" class="headerlink" title="在线算法输出N个整数的最大子列和"></a>在线算法输出N个整数的最大子列和</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubSum</span><span class="params">(<span class="keyword">int</span> a\[\], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thisSum = <span class="number">0</span>, maxSum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        thisSum += a\[i\];</span><br><span class="line">        <span class="keyword">if</span> (thisSum &gt; maxSum) &#123;</span><br><span class="line">            maxSum = thisSum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (thisSum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            thisSum = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, *a, sum;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入数列长度：\\n"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    a = <span class="keyword">new</span> <span class="keyword">int</span>\[n\];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入数列：\\n"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a\[i\];</span><br><span class="line">    &#125;</span><br><span class="line">    sum = maxSubSum(a, n);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最大子列和为："</span> &lt;&lt; sum &lt;&lt; <span class="string">"\\n"</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在线算法输出N个整数的最大子列和及其首尾项"><a href="#在线算法输出N个整数的最大子列和及其首尾项" class="headerlink" title="在线算法输出N个整数的最大子列和及其首尾项"></a>在线算法输出N个整数的最大子列和及其首尾项</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubSumPrint</span><span class="params">(<span class="keyword">int</span> a\[\], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thisSum = <span class="number">0</span>, maxSum = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> head, rear, flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> maxHead = <span class="number">0</span>, maxRear = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        thisSum += a\[i\];</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a\[i\] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                head = rear = i;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            rear++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (thisSum &gt; maxSum) &#123;</span><br><span class="line">            maxSum = thisSum;</span><br><span class="line">            maxHead = head;</span><br><span class="line">            maxRear = rear;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (thisSum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            thisSum = <span class="number">0</span>;</span><br><span class="line">            flag = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (maxSum == <span class="number">-1</span>) &#123;</span><br><span class="line">        maxSum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最大子列和为："</span> &lt;&lt; maxSum &lt;&lt; <span class="string">"\\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最大子列头数字为"</span> &lt;&lt; a\[maxHead\] &lt;&lt; <span class="string">"  尾数字为"</span> &lt;&lt; a\[maxRear\] &lt;&lt; <span class="string">"\\n"</span>;</span><br><span class="line">    <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, *a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入数列长度：\\n"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    a = <span class="keyword">new</span> <span class="keyword">int</span>\[n\];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入数列：\\n"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a\[i\];</span><br><span class="line">    &#125;</span><br><span class="line">    maxSubSumPrint(a, n);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用链表输出两个一元多项式的乘积与和"><a href="#使用链表输出两个一元多项式的乘积与和" class="headerlink" title="使用链表输出两个一元多项式的乘积与和"></a>使用链表输出两个一元多项式的乘积与和</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PolyNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> coef;</span><br><span class="line">    <span class="keyword">int</span> expo;</span><br><span class="line">    PolyNode *nextNode;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">PolyNode* <span class="title">inputPoly</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    PolyNode *poly = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    PolyNode *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请以指数递降顺序输入各项系数与指数（以空格分开）：\\n"</span>;</span><br><span class="line">    p = poly;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; p-&gt;coef;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; p-&gt;expo;</span><br><span class="line">    <span class="keyword">while</span> (--n) &#123;</span><br><span class="line">        p-&gt;nextNode = <span class="keyword">new</span> PolyNode;</span><br><span class="line">        p = p-&gt;nextNode;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p-&gt;coef;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p-&gt;expo;</span><br><span class="line">    &#125;</span><br><span class="line">    p-&gt;nextNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> poly;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">PolyNode* <span class="title">add</span><span class="params">(PolyNode* p1, PolyNode* p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PolyNode* p = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    p-&gt;nextNode = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    PolyNode* p0 = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span> (p1 || p2) &#123;</span><br><span class="line">        p0 = p-&gt;nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p1&amp;&amp;p2) &#123;</span><br><span class="line">        p = p-&gt;nextNode;</span><br><span class="line">        <span class="keyword">if</span> (p1-&gt;expo &gt; p2-&gt;expo) &#123;</span><br><span class="line">            p-&gt;expo = p1-&gt;expo;</span><br><span class="line">            p-&gt;coef = p1-&gt;coef;</span><br><span class="line">            p1 = p1-&gt;nextNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p1-&gt;expo &lt; p2-&gt;expo) &#123;</span><br><span class="line">            p-&gt;expo = p2-&gt;expo;</span><br><span class="line">            p-&gt;coef = p2-&gt;coef;</span><br><span class="line">            p2 = p2-&gt;nextNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            p-&gt;expo = p1-&gt;expo;</span><br><span class="line">            p-&gt;coef = p1-&gt;coef + p2-&gt;coef;</span><br><span class="line">            p1 = p1-&gt;nextNode;</span><br><span class="line">            p2 = p2-&gt;nextNode;</span><br><span class="line">        &#125;</span><br><span class="line">        p-&gt;nextNode = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p1) &#123;</span><br><span class="line">        p = p-&gt;nextNode;</span><br><span class="line">        p-&gt;expo = p1-&gt;expo;</span><br><span class="line">        p-&gt;coef = p1-&gt;coef;</span><br><span class="line">        p1 = p1-&gt;nextNode;</span><br><span class="line">        p-&gt;nextNode = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p2) &#123;</span><br><span class="line">        p = p-&gt;nextNode;</span><br><span class="line">        p-&gt;expo = p2-&gt;expo;</span><br><span class="line">        p-&gt;coef = p2-&gt;coef;</span><br><span class="line">        p2 = p2-&gt;nextNode;</span><br><span class="line">        p-&gt;nextNode = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    &#125;</span><br><span class="line">    p-&gt;nextNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> p0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">PolyNode* <span class="title">mult</span><span class="params">(PolyNode* p1, PolyNode* p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PolyNode *p = <span class="literal">NULL</span>;</span><br><span class="line">    PolyNode *t = <span class="keyword">new</span> PolyNode;</span><br><span class="line">    t-&gt;nextNode = <span class="literal">NULL</span>;</span><br><span class="line">    PolyNode \*i = p1, \*j = p2;</span><br><span class="line">    <span class="keyword">while</span> (i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i-&gt;coef) &#123;</span><br><span class="line">            j = p2;</span><br><span class="line">            <span class="keyword">while</span> (j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j-&gt;coef) &#123;</span><br><span class="line">                    t-&gt;coef = i-&gt;coef*j-&gt;coef;</span><br><span class="line">                    t-&gt;expo = i-&gt;expo + j-&gt;expo;</span><br><span class="line">                    p = add(p, t);</span><br><span class="line">                &#125;</span><br><span class="line">                j = j-&gt;nextNode;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        i = i-&gt;nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printPoly</span><span class="params">(PolyNode* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;coef) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; p-&gt;coef &lt;&lt; <span class="string">' '</span> &lt;&lt; p-&gt;expo &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p-&gt;nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"0 0"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n1, n2;</span><br><span class="line">    PolyNode \*p1, \*p2, \*padd, \*pmult;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入第一个多项式非零项项数：\\n"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n1;</span><br><span class="line">    p1 = inputPoly(n1);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入第二个多项式非零项项数：\\n"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n2;</span><br><span class="line">    p2 = inputPoly(n2);</span><br><span class="line">    padd = add(p1, p2);</span><br><span class="line">    pmult = mult(p1, p2);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"和多项式的非零项为：\\n"</span>;</span><br><span class="line">    printPoly(padd);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"乘积多项式的非零项为：\\n"</span>;</span><br><span class="line">    printPoly(pmult);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="以k为单位反转抽象链表"><a href="#以k为单位反转抽象链表" class="headerlink" title="以k为单位反转抽象链表"></a>以k为单位反转抽象链表</h4><p>#include<iostream></iostream></p>
<p>#include<iomanip><br>using namespace std;<br>class Node<br>{<br>public:<br>    int Data;<br>    int Next;<br>};<br>void input(Node a[], int n)<br>{<br>    int i;<br>    for (int j = 0; j &lt; n; j++) {<br>        cin &gt;&gt; i;<br>        cin &gt;&gt; a[i].Data &gt;&gt; a[i].Next;<br>    }<br>}<br>int count(Node a[], int h)<br>{<br>    int i = 0, p = h;<br>    while (p != -1)<br>    {<br>        i++;<br>        p = a[p].Next;<br>    }<br>    return i;<br>}<br>void reverse(Node a[], int&amp; h, int k)<br>{<br>    int n, i = 0;<br>    n = count(a, h);<br>    int p, h1, h2, t1, t2;<br>    p = h1 = h2 = h;<br>    t1 = a[p].Next;<br>    t2 = a[t1].Next;<br>    while (++i)<br>    {<br>        if (i &gt; n / k) {<br>            break;<br>        }<br>        for (int j = 0; j &lt; k - 1; j++)<br>        {<br>            a[t1].Next = p;<br>            p = t1;<br>            t1 = t2;<br>            t2 = a[t2].Next;<br>        }<br>        if (i == 1)<br>        {<br>            h = p;<br>        }<br>        else {<br>            a[h1].Next = p;<br>            h1 = h2;<br>        }<br>        p = t1;<br>        t1 = t2;<br>        t2 = a[t2].Next;<br>        h2 = p;<br>    }<br>    a[h1].Next = p;<br>}<br>void print(Node a[], int h)<br>{<br>    int p = h;<br>    while (p != -1 &amp;&amp; a[p].Next != -1) {<br>        cout &lt;&lt; setfill(‘0’) &lt;&lt; setw(5) &lt;&lt; p &lt;&lt; ‘ ‘ &lt;&lt; a[p].Data &lt;&lt; ‘ ‘ &lt;&lt; setw(5) &lt;&lt; a[p].Next &lt;&lt; ‘\n’;<br>        p = a[p].Next;<br>    }<br>    if (a[p].Next == -1) {<br>        cout &lt;&lt; setfill(‘0’) &lt;&lt; setw(5) &lt;&lt; p &lt;&lt; ‘ ‘ &lt;&lt; a[p].Data &lt;&lt; ‘ ‘ &lt;&lt; a[p].Next &lt;&lt; ‘\n’;<br>    }<br>}<br>void main()<br>{<br>    int head, n, k;<br>    Node Memory[100000];<br>    cout &lt;&lt; “请输入头地址、节点总数、反转单位长度：\n”;<br>    cin &gt;&gt; head &gt;&gt; n &gt;&gt; k;<br>    input(Memory, n);<br>    reverse(Memory, head, k);<br>    cout &lt;&lt; “反转后结果：\n”;<br>    print(Memory, head);<br>    system(“pause”);<br>}</iomanip></p>
<h4 id="判断一组数是否为可能的出栈结果"><a href="#判断一组数是否为可能的出栈结果" class="headerlink" title="判断一组数是否为可能的出栈结果"></a>判断一组数是否为可能的出栈结果</h4><p>#include<iostream></iostream></p>
<p>#include<iomanip><br>using namespace std;<br>class Node<br>{<br>public:<br>    int Data;<br>    Node<em> Next;<br>};<br>void push(Node</em> &amp;top, int&amp; sum, int a)<br>{<br>    Node<em> temp = new Node;<br>    temp-&gt;Next = top;<br>    top = temp;<br>    top-&gt;Data = a;<br>    sum++;<br>}<br>int pop(Node</em> &amp;top, int&amp; sum)<br>{<br>    Node<em> temp = top;<br>    top = top-&gt;Next;<br>    temp-&gt;Next = NULL;<br>    sum–;<br>    return temp-&gt;Data;<br>}<br>int check(int m, int n)<br>{<br>    int temp = 0, sum = 0;<br>    int x;<br>    int result = 1;<br>    Node</em> top = new Node;<br>    top-&gt;Next = NULL;<br>    for (int i = 0; i &lt; n; i++) {<br>        cin &gt;&gt; x;<br>        if (x &lt; temp) {<br>            if (top-&gt;Data != x) {<br>                result = 0;<br>            }<br>            else {<br>                pop(top, sum);<br>            }<br>            continue;<br>        }<br>        while (++temp != x) {<br>            push(top, sum, temp);<br>            if (sum &gt; m - 1) {<br>                result = 0;<br>                break;<br>            }<br>        }<br>    }<br>    return result;<br>}<br>void main()<br>{<br>    int m, n, k;<br>    cin &gt;&gt; m &gt;&gt; n &gt;&gt; k;<br>    int *result;<br>    result = new int[k];<br>    for (int i = 0; i &lt; k; i++)<br>    {<br>        result[i] = check(m, n);<br>    }<br>    for (int i = 0; i &lt; k; i++)<br>    {<br>        switch (result[i])<br>        {<br>        case 0:cout &lt;&lt; “NO\n”;<br>            break;<br>        case 1:cout &lt;&lt; “YES\n”;<br>            break;<br>        }<br>    }<br>    system(“pause”);<br>}</iomanip></p>
<h4 id="递归法判断树的同构"><a href="#递归法判断树的同构" class="headerlink" title="递归法判断树的同构"></a>递归法判断树的同构</h4><p>#include<iostream></iostream></p>
<p>#include<iomanip><br>using namespace std;<br>class Node<br>{<br>public:<br>    char data;<br>    int left;<br>    int right;<br>    int isRoot;<br>};<br>int input(Node <em>&amp;a)<br>{<br>    int n;<br>    int root;<br>    char left, right;<br>    cin &gt;&gt; n;<br>    if (!n) {<br>        a = NULL;<br>        return -1;<br>    }<br>    a = new Node[n];<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        cin &gt;&gt; a[i].data &gt;&gt; left &gt;&gt; right;<br>        a[i].isRoot = 1;<br>        if (left == ‘-‘) {<br>            a[i].left = -1;<br>        }<br>        else {<br>            a[i].left = int(left) - 48;<br>        }<br>        if (right == ‘-‘) {<br>            a[i].right = -1;<br>        }<br>        else {<br>            a[i].right = int(right) - 48;<br>        }<br>    }<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        if (a[i].left != -1) {<br>            a[a[i].left].isRoot = 0;<br>        }<br>        if (a[i].right != -1) {<br>            a[a[i].right].isRoot = 0;<br>        }<br>    }<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        if (a[i].isRoot) {<br>            root = i;<br>        }<br>    }<br>    return root;<br>}<br>int compare(Node</em> a, Node<em> b, int aRoot, int bRoot)<br>{<br>    if (!a&amp;&amp;!b) {<br>        return 1;<br>    }<br>    else if (!a || !b) {<br>        return 0;<br>    }<br>    else if (aRoot == -1 &amp;&amp; bRoot == -1) {<br>        return 1;<br>    }<br>    else if (aRoot == -1 || bRoot == -1) {<br>        return 0;<br>    }<br>    else if (a[aRoot].data != b[bRoot].data) {<br>        return 0;<br>    }<br>    else if (compare(a, b, a[aRoot].left, b[bRoot].left)) {<br>        return compare(a, b, a[aRoot].right, b[bRoot].right);<br>    }<br>    else if (compare(a, b, a[aRoot].left, b[bRoot].right)) {<br>        return compare(a, b, a[aRoot].right, b[bRoot].left);<br>    }<br>    else {<br>        return 0;<br>    }<br>}<br>void main()<br>{<br>    Node \</em>a, *b;<br>    int aRoot, bRoot;<br>    int result;<br>    aRoot = input(a);<br>    bRoot = input(b);<br>    result = compare(a, b, aRoot, bRoot);<br>    if (result == 1) {<br>        cout &lt;&lt; “Yes”;<br>    }<br>    else {<br>        cout &lt;&lt; “No”;<br>    }<br>    system(“pause”);<br>}</iomanip></p>
<h4 id="层序遍历打印叶子结点"><a href="#层序遍历打印叶子结点" class="headerlink" title="层序遍历打印叶子结点"></a>层序遍历打印叶子结点</h4><p>#include<iostream></iostream></p>
<p>#include<iomanip><br>using namespace std;<br>class Node<br>{<br>public:<br>    int left;<br>    int right;<br>    int isRoot;<br>    int isLeaf;<br>};<br>class QueueNode<br>{<br>public:<br>    int a;<br>    QueueNode<em> next;<br>};<br>int input(Node </em>&amp;a)<br>{<br>    int n;<br>    int root;<br>    char left, right;<br>    cin &gt;&gt; n;<br>    if (!n) {<br>        a = NULL;<br>        return -1;<br>    }<br>    a = new Node[n];<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        cin &gt;&gt; left &gt;&gt; right;<br>        a[i].isRoot = 1;<br>        a[i].isLeaf = 1;<br>        if (left == ‘-‘) {<br>            a[i].left = -1;<br>        }<br>        else {<br>            a[i].left = int(left) - int(‘0’);<br>        }<br>        if (right == ‘-‘) {<br>            a[i].right = -1;<br>        }<br>        else {<br>            a[i].right = int(right) - int(‘0’);<br>        }<br>    }<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        if (a[i].left != -1) {<br>            a[a[i].left].isRoot = 0;<br>            a[i].isLeaf = 0;<br>        }<br>        if (a[i].right != -1) {<br>            a[a[i].right].isRoot = 0;<br>            a[i].isLeaf = 0;<br>        }<br>    }<br>    for (int i = 0; i &lt; n; i++)<br>    {<br>        if (a[i].isRoot) {<br>            root = i;<br>        }<br>    }<br>    return root;<br>}<br>void enqueue(int a, QueueNode<em>&amp; rear) {<br>    rear-&gt;a = a;<br>    rear-&gt;next = new QueueNode;<br>    rear = rear-&gt;next;<br>    rear-&gt;next = NULL;<br>}<br>int dequeue(QueueNode</em>&amp; front) {<br>    QueueNode<em> temp = front;<br>    front = front-&gt;next;<br>    temp-&gt;next = NULL;<br>    return temp-&gt;a;<br>}<br>void printLeaf(Node </em>tree, int root) {<br>    QueueNode *front, *rear;<br>    int a, flag = 0;<br>    front = rear = new QueueNode;<br>    rear-&gt;next = NULL;<br>    enqueue(root, rear);<br>    while (front != rear) {<br>        a = dequeue(front);<br>        if (tree[a].isLeaf) {<br>            if (!flag) {<br>                cout &lt;&lt; a;<br>                flag = 1;<br>            }<br>            else {<br>                cout &lt;&lt; ‘ ‘ &lt;&lt; a;<br>            }<br>        }<br>        if (tree[a].left != -1) {<br>            enqueue(tree[a].left, rear);<br>        }<br>        if (tree[a].right != -1) {<br>            enqueue(tree[a].right, rear);<br>        }<br>    }<br>}<br>void main()<br>{<br>    Node *tree;<br>    int root;<br>    root = input(tree);<br>    printLeaf(tree, root);<br>    system(“pause”);<br>}</iomanip></p>
<pre><code>2016年3月
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="extend next" rel="next" href="/blog/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Diary</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Diary</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/blog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
